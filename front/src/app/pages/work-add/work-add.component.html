<app-header></app-header>

<div class="margin-header espacamento-base">
  <div class="card card-event">
    <div [formGroup]="form" class="card-body">
      <h1 class="card-title">Submeter trabalho</h1>
      <div class="form-group mb-3">
        <label for="titulo">Título:</label>
        <input type="text" class="form-control" id="titulo" formControlName="titulo">
      </div>

      <div class="form-group mb-3">
        <label for="titulo">Categoria:</label>
        <select class="mb-3" formControlName="categoria" >
          <option class="form-control" *ngFor="let categoria of categorias" [ngValue]="categoria">{{categoria.descricao}}</option>
        </select>
      </div>

      <div class="form-group mb-3">
        <label for="titulo">Área do conhecimento:</label>
        <select class="mb-3" formControlName="area" >
          <option class="form-control" *ngFor="let area of areas" [ngValue]="area">{{area.descricao}}</option>
        </select>
      </div>

      <div class="form-group mb-3 div-button">
        <label for="emailAutor">Autores do trabalho:</label>
        <p *ngFor="let autor of autores">{{ autor.nome ?? autor.email }} </p>
        <label for="emailAutor">Digite um e-mail para adicionar um autor para o trabalho:</label>
        <input type="text" class="form-control mb-3" id="emailAutor" formControlName="emailAutor">
        <button (click)="addEmailAuthor()" class="btn btn-primary center">
          <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
          Adicionar
        </button>
      </div>

      <div class="form-group mb-3">
        <p-fileUpload name="myfile[]" (uploadHandler)="onUpload($event)" [customUpload]="true" [multiple]="false" accept="application/pdf" [auto]="true" >
        </p-fileUpload>
      </div>

      <div class="linha center">
        <button class="btn btn-secondary" style="margin-right: 2rem;" (click)="this.mainService.returnPreviousPage()">
          Cancelar
        </button>
        <button (click)="validateDataToAddWork()" class="btn btn-primary">
          <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
          Adicionar
        </button>
      </div>

    </div>

  </div>
</div>
